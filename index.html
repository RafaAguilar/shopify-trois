<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Shopify-Trois &mdash; Shopify-Trois 0.3 documentation</title>
    
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Shopify-Trois 0.3 documentation" href="#" />
    <link rel="next" title="Models" href="models.html" /> 
  </head>
  <body>
  
  
  <div class=indexwrapper>
  


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="shopify-trois">
<h1>Shopify-Trois<a class="headerlink" href="#shopify-trois" title="Permalink to this headline">¶</a></h1>
<div class="section" id="links">
<h2>Links<a class="headerlink" href="#links" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://github.com/masom/shopify-trois">source</a></li>
<li><a class="reference external" href="http://api.shopify.com">Shopify API</a></li>
</ul>
</div>
<div class="section" id="docs">
<h2>Docs<a class="headerlink" href="#docs" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="models.html">Models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="models.html#base">Base</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html#id1">Models</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="engines.html">Engines</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
</ul>
</div>
</div>
</div>
<div class="section" id="api">
<h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="app-authorization">
<h2>App Authorization<a class="headerlink" href="#app-authorization" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">shopify_trois</span> <span class="kn">import</span> <span class="n">Credentials</span><span class="p">,</span> <span class="n">Collection</span>
<span class="kn">from</span> <span class="nn">shopify_trois.models</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">shopify_trois.engines.http</span> <span class="kn">import</span> <span class="n">Json</span> <span class="k">as</span> <span class="n">Shopify</span>

<span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="p">(</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s">&#39;your api key&#39;</span><span class="p">,</span>
    <span class="n">scope</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;read_content&#39;</span><span class="p">,</span> <span class="s">&#39;write_orders&#39;</span><span class="p">],</span>
    <span class="n">secret</span><span class="o">=</span><span class="s">&#39;your api key secret&#39;</span>
<span class="p">)</span>
<span class="n">shopify</span> <span class="o">=</span> <span class="n">Shopify</span><span class="p">(</span><span class="n">shop_name</span><span class="o">=</span><span class="s">&quot;your store name&quot;</span><span class="p">,</span> <span class="n">credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">)</span>

<span class="c"># Redirect the shop owner to the url provided by `shopify.oauth_authorize_url()`</span>
<span class="c"># print(shopify.oauth_authorize_url())</span>
<span class="c"># Get the oauth temporary code and set it in the credentials object.</span>

<span class="n">credentials</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="s">&quot;oauth temporary code&quot;</span>

<span class="c"># fetch the access token</span>
<span class="n">shopify</span><span class="o">.</span><span class="n">setup_access_token</span><span class="p">()</span>

<span class="c"># credentials.oauth_access_token will contain the access token. It would be a good idea to save it somewhere.</span>
</pre></div>
</div>
</div>
<div class="section" id="client-setup-once-authorized">
<h2>Client Setup Once Authorized<a class="headerlink" href="#client-setup-once-authorized" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="p">(</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s">&#39;your api key&#39;</span><span class="p">,</span>
    <span class="n">scope</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;read_content&#39;</span><span class="p">],</span>
    <span class="n">secret</span><span class="o">=</span><span class="s">&#39;your app secret&#39;</span><span class="p">,</span>
    <span class="n">oauth_access_token</span><span class="o">=</span><span class="s">&quot;your access token&quot;</span>
<span class="p">)</span>

<span class="n">shopify</span> <span class="o">=</span> <span class="n">Shopify</span><span class="p">(</span><span class="n">shop_name</span><span class="o">=</span><span class="s">&quot;your store name&quot;</span><span class="p">,</span> <span class="n">credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">)</span>

<span class="c"># The client is now ready to communicate with Shopify</span>
<span class="n">shopify</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">Shop</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="working-with-data">
<h2>Working With Data<a class="headerlink" href="#working-with-data" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Fetch the store information</span>
<span class="n">shop</span> <span class="o">=</span> <span class="n">shopify</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">Shop</span><span class="p">)</span>

<span class="c"># Set the shop as public</span>
<span class="n">shop</span><span class="o">.</span><span class="n">public</span> <span class="o">=</span> <span class="bp">True</span>

<span class="c"># Calling changes() on a model instance will show the modified properties.</span>
<span class="k">print</span><span class="p">(</span><span class="n">shop</span><span class="o">.</span><span class="n">changes</span><span class="p">())</span>

<span class="n">webhook</span> <span class="o">=</span> <span class="n">Webhook</span><span class="p">()</span>
<span class="n">webhook</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="s">&quot;http://do-not-copy-this.com&quot;</span>
<span class="n">webhook</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="s">&quot;json&quot;</span>
<span class="n">webhook</span><span class="o">.</span><span class="n">topic</span> <span class="o">=</span> <span class="s">&quot;orders/create&quot;</span>

<span class="c"># Create the webhook</span>
<span class="n">shopify</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">webhook</span><span class="p">)</span>

<span class="c"># Get all the webhooks and iterates them</span>
<span class="n">webhooks</span> <span class="o">=</span> <span class="n">shopify</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">Webhook</span><span class="p">)</span>
<span class="k">for</span> <span class="n">webhook</span> <span class="ow">in</span> <span class="n">webhooks</span><span class="p">:</span>
    <span class="c"># webhook is a Webhook instance, created by iterating the Collection</span>
    <span class="k">print</span><span class="p">(</span><span class="n">webhook</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="section" id="relationships">
<h2>Relationships<a class="headerlink" href="#relationships" title="Permalink to this headline">¶</a></h2>
<p>Shopify-Trois has basic entity relationship support.
Some entities have been marked as subresources of another.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">shopify</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">ProductVariant</span><span class="p">,</span> <span class="n">parent_id</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">variant</span> <span class="o">=</span> <span class="n">ProductVariant</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span> <span class="n">product_id</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">shopify</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">variant</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="metafields">
<h2>Metafields<a class="headerlink" href="#metafields" title="Permalink to this headline">¶</a></h2>
<p>Shopify-Trois exposes metafields as it do for relationships.</p>
<p>Note: The ProductVariant metafield is currently unsupported.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">shopify</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">BlogMetafield</span><span class="p">,</span> <span class="n">parent_id</span><span class="o">=</span><span class="mi">234224</span><span class="p">)</span>

<span class="n">metafield</span> <span class="o">=</span> <span class="n">BlogMetafield</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">2342</span><span class="p">,</span> <span class="n">blog_id</span><span class="o">=</span><span class="mi">3242424</span><span class="p">)</span>
<span class="n">shopify</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">metafield</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="accessing-multiple-shops">
<h2>Accessing Multiple Shops<a class="headerlink" href="#accessing-multiple-shops" title="Permalink to this headline">¶</a></h2>
<p>Shopify-Trois can easily access multiple shops within
the same thread.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">shopify_trois</span> <span class="kn">import</span> <span class="n">Credentials</span>
<span class="kn">from</span> <span class="nn">shopify_trois.models</span> <span class="kn">import</span> <span class="n">Shop</span>
<span class="kn">from</span> <span class="nn">shopify_trois.engines.http</span> <span class="kn">import</span> <span class="n">Json</span> <span class="k">as</span> <span class="n">Shopify</span>

<span class="n">credentials</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;a-store-name&quot;</span><span class="p">:</span> <span class="n">Credentials</span><span class="p">(</span>
        <span class="n">api_key</span><span class="o">=</span><span class="s">&#39;your-app-key&#39;</span><span class="p">,</span>
        <span class="n">secret</span><span class="o">=</span><span class="s">&#39;yout-app-secret&#39;</span><span class="p">,</span>
        <span class="n">oauth_access_token</span><span class="o">=</span><span class="s">&#39;access-token&#39;</span><span class="p">,</span>
        <span class="n">scope</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;read_content&#39;</span><span class="p">]</span>
    <span class="p">),</span>
    <span class="s">&quot;another-store-name&quot;</span><span class="p">:</span> <span class="n">Credentials</span><span class="p">(</span>
        <span class="n">api_key</span><span class="o">=</span><span class="s">&#39;your-app-key&#39;</span><span class="p">,</span>
        <span class="n">secret</span><span class="o">=</span><span class="s">&#39;your-app-secret&#39;</span><span class="p">,</span>
        <span class="n">oauth_access_token</span><span class="o">=</span><span class="s">&#39;access-token&#39;</span><span class="p">,</span>
        <span class="n">scope</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;read_content&#39;</span><span class="p">]</span>
    <span class="p">)</span>
<span class="p">}</span>

<span class="n">instances</span> <span class="o">=</span> <span class="p">[</span><span class="n">Shopify</span><span class="p">(</span><span class="n">shop_name</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">credentials</span><span class="o">=</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">credentials</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>

<span class="n">stores</span> <span class="o">=</span> <span class="p">[</span><span class="n">instance</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">Shop</span><span class="p">)</span> <span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">instances</span><span class="p">]</span>

<span class="k">for</span> <span class="n">store</span> <span class="ow">in</span> <span class="n">stores</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">store</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="shopify_trois.engines.http.json.Json">
<em class="property">class </em><tt class="descclassname">shopify_trois.engines.http.json.</tt><tt class="descname">Json</tt><big>(</big><em>shop_name</em>, <em>credentials</em>, <em>ignore_supported=False</em>, <em>ignore_model_properties=False</em><big>)</big><a class="headerlink" href="#shopify_trois.engines.http.json.Json" title="Permalink to this definition">¶</a></dt>
<dd><p>The Json engine implements an http transport using JSON with OAuth
authentication.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>shop_name</strong> &#8211; The name of the shopify store.</li>
<li><strong>credentials</strong> &#8211; <tt class="xref py py-class docutils literal"><span class="pre">Credential</span></tt></li>
<li><strong>ignore_supported</strong> &#8211; When set to True, the engine will ignore
the <tt class="docutils literal"><span class="pre">supported</span></tt> property of the models.</li>
<li><strong>ignore_model_properties</strong> &#8211; When set to True, the engine will
ignore the <tt class="docutils literal"><span class="pre">properties</span></tt> property of
models when persisting them.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="shopify_trois.engines.http.json.Json.add">
<tt class="descname">add</tt><big>(</big><em>instance</em>, <em>auto_update=True</em><big>)</big><a class="headerlink" href="#shopify_trois.engines.http.json.Json.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the model instance to the store.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>instance</strong> &#8211; The model instance being added.</li>
<li><strong>auto_update</strong> &#8211; Auto-update the instance with the values from
Shopify. When set to false, the raw JSON object
will be returned.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">shopify_trois.engines.http</span> <span class="kn">import</span> <span class="n">Json</span> <span class="k">as</span> <span class="n">Shopify</span>
<span class="kn">from</span> <span class="nn">shopify_trois</span> <span class="kn">import</span> <span class="n">Credentials</span>
<span class="kn">from</span> <span class="nn">shopify_trois.models</span> <span class="kn">import</span> <span class="n">Blog</span>

<span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">shopify</span> <span class="o">=</span> <span class="n">Shopify</span><span class="p">(</span><span class="n">store_name</span><span class="o">=</span><span class="s">&quot;test&quot;</span><span class="p">,</span> <span class="n">credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">)</span>

<span class="n">blog</span> <span class="o">=</span> <span class="n">Blog</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s">&quot;Awesome&quot;</span><span class="p">)</span>
<span class="n">shopify</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">blog</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="shopify_trois.engines.http.json.Json.authorize_app_url">
<tt class="descname">authorize_app_url</tt><big>(</big><big>)</big><a class="headerlink" href="#shopify_trois.engines.http.json.Json.authorize_app_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the oauth authorization url.</p>
</dd></dl>

<dl class="method">
<dt id="shopify_trois.engines.http.json.Json.count">
<tt class="descname">count</tt><big>(</big><em>model</em>, <em>**params</em><big>)</big><a class="headerlink" href="#shopify_trois.engines.http.json.Json.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the count of a model, filtered by parameters</p>
<p>example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">shopify_trois.engines.http</span> <span class="kn">import</span> <span class="n">Json</span> <span class="k">as</span> <span class="n">Shopify</span>
<span class="kn">from</span> <span class="nn">shopify_trois</span> <span class="kn">import</span> <span class="n">Credentials</span>
<span class="kn">from</span> <span class="nn">shopify_trois.models</span> <span class="kn">import</span> <span class="n">Blog</span>

<span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">shopify</span> <span class="o">=</span> <span class="n">Shopify</span><span class="p">(</span><span class="n">store_name</span><span class="o">=</span><span class="s">&quot;test&quot;</span><span class="p">,</span> <span class="n">credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">)</span>

<span class="n">blogs</span> <span class="o">=</span> <span class="n">shopify</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">Blog</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="shopify_trois.engines.http.json.Json.custom_post">
<tt class="descname">custom_post</tt><big>(</big><em>instance</em>, <em>action</em>, <em>data=None</em><big>)</big><a class="headerlink" href="#shopify_trois.engines.http.json.Json.custom_post" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a custom post method on an instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>instance</strong> &#8211; The model instance being modified.</li>
<li><strong>action</strong> &#8211; The action to be executed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="shopify_trois.engines.http.json.Json.delete">
<tt class="descname">delete</tt><big>(</big><em>instance</em>, <em>**params</em><big>)</big><a class="headerlink" href="#shopify_trois.engines.http.json.Json.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a model instance.</p>
<p>An InvalidRequestException will be raised if the instance does not yet
exists.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>instance</strong> &#8211; The model instance to remove.</li>
<li><strong>**params</strong> &#8211; <p>Query parameters.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">shopify_trois.engines.http</span> <span class="kn">import</span> <span class="n">Json</span> <span class="k">as</span> <span class="n">Shopify</span>
<span class="kn">from</span> <span class="nn">shopify_trois</span> <span class="kn">import</span> <span class="n">Credentials</span>
<span class="kn">from</span> <span class="nn">shopify_trois.models</span> <span class="kn">import</span> <span class="n">Blog</span>

<span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">shopify</span> <span class="o">=</span> <span class="n">Shopify</span><span class="p">(</span><span class="n">store_name</span><span class="o">=</span><span class="s">&quot;test&quot;</span><span class="p">,</span> <span class="n">credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">)</span>

<span class="n">blog</span> <span class="o">=</span> <span class="n">Blog</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">shopify</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">blog</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="shopify_trois.engines.http.json.Json.fetch">
<tt class="descname">fetch</tt><big>(</big><em>model</em>, <em>primary_key=None</em>, <em>auto_instance=True</em>, <em>**params</em><big>)</big><a class="headerlink" href="#shopify_trois.engines.http.json.Json.fetch" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a specific model instance by primary key.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>Model</strong> &#8211; The class being queried.</li>
<li><strong>primary_key</strong> &#8211; The primary key value of the instance.</li>
<li><strong>auto_instance</strong> &#8211; Automatically create an instance instead of
returning a json object.</li>
<li><strong>params</strong> &#8211; Query parameters.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">shopify_trois.engines.http</span> <span class="kn">import</span> <span class="n">Json</span> <span class="k">as</span> <span class="n">Shopify</span>
<span class="kn">from</span> <span class="nn">shopify_trois</span> <span class="kn">import</span> <span class="n">Credentials</span>
<span class="kn">from</span> <span class="nn">shopify_trois.models</span> <span class="kn">import</span> <span class="n">Blog</span>

<span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">shopify</span> <span class="o">=</span> <span class="n">Shopify</span><span class="p">(</span><span class="n">store_name</span><span class="o">=</span><span class="s">&quot;test&quot;</span><span class="p">,</span> <span class="n">credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">)</span>

<span class="n">blog</span> <span class="o">=</span> <span class="n">shopify</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">Blog</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="shopify_trois.engines.http.json.Json.ignore_supported">
<tt class="descname">ignore_supported</tt><em class="property"> = None</em><a class="headerlink" href="#shopify_trois.engines.http.json.Json.ignore_supported" title="Permalink to this definition">¶</a></dt>
<dd><p>When set to True, ignore checking for supported actions on models.</p>
</dd></dl>

<dl class="method">
<dt id="shopify_trois.engines.http.json.Json.index">
<tt class="descname">index</tt><big>(</big><em>model</em>, <em>auto_instance=True</em>, <em>**params</em><big>)</big><a class="headerlink" href="#shopify_trois.engines.http.json.Json.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the index for a given model and supplied parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>model</strong> &#8211; The model being queried.</li>
<li><strong>auto_instance</strong> &#8211; Automatically create a Collection instance
instead of returning a json object.</li>
<li><strong>params</strong> &#8211; Query parameters (see shopify documentation)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">shopify_trois.engines.http</span> <span class="kn">import</span> <span class="n">Json</span> <span class="k">as</span> <span class="n">Shopify</span>
<span class="kn">from</span> <span class="nn">shopify_trois</span> <span class="kn">import</span> <span class="n">Credentials</span>
<span class="kn">from</span> <span class="nn">shopify_trois.models</span> <span class="kn">import</span> <span class="n">Blog</span>

<span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">shopify</span> <span class="o">=</span> <span class="n">Shopify</span><span class="p">(</span><span class="n">store_name</span><span class="o">=</span><span class="s">&quot;test&quot;</span><span class="p">,</span> <span class="n">credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">)</span>

<span class="n">blogs</span> <span class="o">=</span> <span class="n">shopify</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">Blog</span><span class="p">)</span>
<span class="k">for</span> <span class="n">blog</span> <span class="ow">in</span> <span class="n">blogs</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">blog</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="shopify_trois.engines.http.json.Json.oauth_access_token">
<tt class="descname">oauth_access_token</tt><big>(</big><big>)</big><a class="headerlink" href="#shopify_trois.engines.http.json.Json.oauth_access_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the OAuth access token from shopify.</p>
<p><tt class="xref py py-meth docutils literal"><span class="pre">setup_access_token()</span></tt> should be used.</p>
</dd></dl>

<dl class="method">
<dt id="shopify_trois.engines.http.json.Json.oauth_access_token_url">
<tt class="descname">oauth_access_token_url</tt><big>(</big><big>)</big><a class="headerlink" href="#shopify_trois.engines.http.json.Json.oauth_access_token_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the OAuth access token url.</p>
</dd></dl>

<dl class="method">
<dt id="shopify_trois.engines.http.json.Json.oauth_authorize_url">
<tt class="descname">oauth_authorize_url</tt><big>(</big><em>redirect_to=None</em><big>)</big><a class="headerlink" href="#shopify_trois.engines.http.json.Json.oauth_authorize_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the oauth authorize url.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>redirect_to</strong> &#8211; URL shopify will redirect to once authorized.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="shopify_trois.engines.http.json.Json.setup_access_token">
<tt class="descname">setup_access_token</tt><big>(</big><big>)</big><a class="headerlink" href="#shopify_trois.engines.http.json.Json.setup_access_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility function wrapping getting the oauth token and setting
the credential values.</p>
</dd></dl>

<dl class="method">
<dt id="shopify_trois.engines.http.json.Json.sync_access_token">
<tt class="descname">sync_access_token</tt><big>(</big><big>)</big><a class="headerlink" href="#shopify_trois.engines.http.json.Json.sync_access_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method to sync the credentials access token with the
http session.</p>
</dd></dl>

<dl class="method">
<dt id="shopify_trois.engines.http.json.Json.update">
<tt class="descname">update</tt><big>(</big><em>instance</em>, <em>auto_update=True</em><big>)</big><a class="headerlink" href="#shopify_trois.engines.http.json.Json.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update a model instance.</p>
<p>An InvalidRequestException will be raised if the instance has not been
marked as existing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>instance</strong> &#8211; The model instance being updated.</li>
<li><strong>auto_update</strong> &#8211; Auto-update the instance with the values from
Shopify. When set to False, the raw JSON object
will be returned.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">shopify_trois.engines.http</span> <span class="kn">import</span> <span class="n">Json</span> <span class="k">as</span> <span class="n">Shopify</span>
<span class="kn">from</span> <span class="nn">shopify_trois</span> <span class="kn">import</span> <span class="n">Credentials</span>
<span class="kn">from</span> <span class="nn">shopify_trois.models</span> <span class="kn">import</span> <span class="n">Blog</span>

<span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">shopify</span> <span class="o">=</span> <span class="n">Shopify</span><span class="p">(</span><span class="n">store_name</span><span class="o">=</span><span class="s">&quot;test&quot;</span><span class="p">,</span> <span class="n">credentials</span><span class="o">=</span><span class="n">credentials</span><span class="p">)</span>

<span class="n">blog</span> <span class="o">=</span> <span class="n">shopify</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">Blog</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">blog</span><span class="o">.</span><span class="n">commentable</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">shopify</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">blog</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="shopify_trois.engines.http.json.Json.url_for_request">
<tt class="descname">url_for_request</tt><big>(</big><em>req</em><big>)</big><a class="headerlink" href="#shopify_trois.engines.http.json.Json.url_for_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates the url for the provided request.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>req</strong> &#8211; See <tt class="xref py py-class docutils literal"><span class="pre">Request</span></tt></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="shopify_trois.engines.http.json.Json.verify_signature">
<tt class="descname">verify_signature</tt><big>(</big><em>query_parameters</em><big>)</big><a class="headerlink" href="#shopify_trois.engines.http.json.Json.verify_signature" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify the signature provided with the query parameters.</p>
<p><a class="reference external" href="http://docs.shopify.com/api/tutorials/oauth">http://docs.shopify.com/api/tutorials/oauth</a></p>
<p>example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">shopify_trois</span> <span class="kn">import</span> <span class="n">Credentials</span>
<span class="kn">from</span> <span class="nn">shopify_trois.engines</span> <span class="kn">import</span> <span class="n">Json</span> <span class="k">as</span> <span class="n">Shopify</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">parse_qsl</span>

<span class="n">credentials</span> <span class="o">=</span> <span class="n">Credentials</span><span class="p">(</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s">&#39;your_api_key&#39;</span><span class="p">,</span>
    <span class="n">scope</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;read_orders&#39;</span><span class="p">],</span>
    <span class="n">secret</span><span class="o">=</span><span class="s">&#39;your_app_secret&#39;</span>
<span class="p">)</span>

<span class="n">shopify</span> <span class="o">=</span> <span class="n">Shopify</span><span class="p">(</span><span class="n">shop_name</span><span class="o">=</span><span class="s">&quot;your_store_name&quot;</span><span class="p">,</span> <span class="n">credentials</span><span class="o">=</span>                    <span class="n">credentials</span><span class="p">)</span>

<span class="n">query_parameters</span> <span class="o">=</span> <span class="n">parse_qsl</span><span class="p">(</span><span class="s">&quot;code=238420989938cb70a609f6ece2e2586b&amp;shop=yourstore.myshopify.com&amp;timestamp=1373382939&amp;signature=6fb122e33c21851c465345b8cb97245e&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">shopify</span><span class="o">.</span><span class="n">verify_signature</span><span class="p">(</span><span class="n">query_parameters</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&quot;invalid signature&quot;</span><span class="p">)</span>

<span class="n">credentials</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">query_parameters</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;code&#39;</span><span class="p">)</span>

<span class="n">shopify</span><span class="o">.</span><span class="n">setup_access_token</span><span class="p">()</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Returns True if the signature is valid.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="shopify_trois.credentials.Credentials">
<em class="property">class </em><tt class="descclassname">shopify_trois.credentials.</tt><tt class="descname">Credentials</tt><big>(</big><em>api_key=''</em>, <em>secret=''</em>, <em>scope=''</em>, <em>code=''</em>, <em>oauth_access_token=None</em><big>)</big><a class="headerlink" href="#shopify_trois.credentials.Credentials" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="shopify_trois.collection.Collection">
<em class="property">class </em><tt class="descclassname">shopify_trois.collection.</tt><tt class="descname">Collection</tt><big>(</big><em>model</em>, <em>data</em><big>)</big><a class="headerlink" href="#shopify_trois.collection.Collection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  
    <a href="http://github.com/masom/shopify-trois"><img style="position: fixed; top: 0; right: 0; border: 0;"
    src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
  

  
  </div>
  

  </body>
</html>